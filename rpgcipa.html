<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amcor SafeQuest: A Jornada Segura (RPG de Seguran√ßa)</title>

    <style>
        /* * ----------------------------------------
         * 1. CSS (Layout Moderno e Arrojado) 
         * ----------------------------------------
         */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f0f0f0; /* Fundo claro */
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        #game-container {
            width: 90%;
            max-width: 1200px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* Sombra para profundidade */
            overflow: hidden;
        }

        #header-game {
            background-color: #004d99; /* Azul escuro da AMCOR */
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }

        #header-game h1 {
            margin: 0;
            font-size: 1.8em;
        }

        #status-bar span {
            margin-left: 20px;
            font-weight: bold;
        }

        #game-area {
            display: flex;
            flex-direction: column; /* Coloca os elementos em coluna no mobile */
            padding: 30px;
            gap: 30px;
        }

        @media (min-width: 768px) {
            #game-area {
                flex-direction: row; /* Volta para linha em telas maiores */
            }
            #scenario-display {
                border-right: 1px solid #ccc;
                padding-right: 30px;
            }
        }
        
        #scenario-display {
            flex-grow: 1;
            text-align: left;
        }

        #scenario-display h2 {
            color: #e5002b; /* Vermelho da AMCOR */
        }
        
        #inventory {
            width: 100%;
            max-width: 250px;
            text-align: center;
            margin: 0 auto;
        }

        #inventory-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .epi-item {
            width: 80px;
            height: 80px;
            object-fit: contain;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;
            border-radius: 10px;
            border: 3px solid transparent;
            padding: 5px;
            background-color: #fff;
        }

        .epi-item:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            opacity: 0.9;
        }

        /* Bot√£o de Iniciar Estilizado */
        #start-button {
            background-color: #e5002b; /* Vermelho da AMCOR */
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
            font-weight: bold;
        }

        #start-button:hover {
            background-color: #a0001e;
        }

        /* Estilos para feedback: Certo e Errado */
        .correct {
            border-color: #4CAF50 !important; /* Verde */
            box-shadow: 0 0 10px #4CAF50;
        }

        .incorrect {
            border-color: #f44336 !important; /* Vermelho */
            box-shadow: 0 0 10px #f44336;
            animation: shake 0.5s;
        }
        
        #feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
        }

        .correct-text {
            background-color: #e8f5e9; /* Verde claro */
            color: #2e7d32; /* Verde escuro */
            padding: 10px;
            border-radius: 5px;
        }

        .incorrect-text {
            background-color: #ffebee; /* Vermelho claro */
            color: #c62828; /* Vermelho escuro */
            padding: 10px;
            border-radius: 5px;
        }
        
        .hint {
            font-style: italic;
            color: #666;
            margin-top: 15px;
        }

        /* Anima√ß√£o de erro */
        @keyframes shake {
            0%, 100% {transform: translateX(0);}
            20%, 60% {transform: translateX(-10px);}
            40%, 80% {transform: translateX(10px);}
        }

        /* Estilo para Bot√µes de M√∫ltipla Escolha */
        .choice-button {
            background-color: #004d99; 
            color: white; 
            padding: 10px; 
            margin: 5px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            transition: background-color 0.3s;
            display: block; /* Garante que cada bot√£o ocupe uma linha */
            width: 100%;
            text-align: left;
        }
        .choice-button:hover {
            background-color:#a0001e !important;
        }
        .choice-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

    </style>
</head>
<body>
    <div id="game-container">
        <header id="header-game">
            <h1>üõ°Ô∏è Amcor SafeQuest</h1>
            <div id="status-bar">
                <span id="level-display">Pronto</span>
                <span id="score-display">Pontua√ß√£o: 0</span>
            </div>
        </header>

        <main id="game-area">
            <div id="scenario-display">
                <h2>Bem-vindo(a) √† Jornada Segura!</h2>
                <p>Neste RPG, voc√™ aplicar√° as regras de seguran√ßa e qualidade da AMCOR. Seu objetivo √© completar as miss√µes escolhendo os Equipamentos de Prote√ß√£o Individual (EPIs) corretos e tomando as decis√µes certas.</p>
                <p>Prepare-se para garantir um **Comportamento Seguro** e de **Qualidade**!</p>
                <button id="start-button">Iniciar Miss√£o</button>
                <div id="feedback-area"></div>
            </div>
            
            <div id="inventory">
                <h3>Invent√°rio de EPIs</h3>
                <div id="inventory-items">
                    <img src="luvaanticorte.png" alt="Luva Anticorte" class="epi-item" data-epi-id="luva-anticorte" title="Luva Anticorte">
                    <img src="luvalatex.jpg" alt="Luva de L√°tex Qu√≠mica" class="epi-item" data-epi-id="luva-latex" title="Luva de L√°tex Qu√≠mica">
                    <img src="oculosamplavisao.webp" alt="√ìculos Ampla Vis√£o" class="epi-item" data-epi-id="oculos-ampla" title="√ìculos Ampla Vis√£o (contra respingos)">
                    <img src="oculosdeseguranca.jpg" alt="√ìculos de Seguran√ßa" class="epi-item" data-epi-id="oculos-seguranca" title="√ìculos de Seguran√ßa (b√°sico)">
                    <img src="bonecasquete.webp" alt="Bon√© Casquete" class="epi-item" data-epi-id="bone-casquete" title="Bon√© Casquete (contra impactos leves)">
                    <img src="luvamangote.jpg" alt="Mangote de Prote√ß√£o" class="epi-item" data-epi-id="mangote" title="Mangote (Prote√ß√£o de Antebra√ßo)">
                </div>
            </div>
        </main>
    </div>

    <script>
        /* * ----------------------------------------
         * 2. JAVASCRIPT (L√≥gica do Jogo com 7 Fases) 
         * ----------------------------------------
         */
        
        // Dados do Jogo (Scenarios/Fases)
        const gameData = [
            // Fase 1: Intervalo de Seguran√ßa (Conhecimento B√°sico)
            {
                phase: 1,
                title: "In√≠cio da Atividade: Intervalo de Seguran√ßa",
                description: "Voc√™ est√° prestes a come√ßar uma tarefa. De acordo com o cartaz, qual das 5 perguntas voc√™ deve fazer a si mesmo para garantir um Intervalo de Seguran√ßa?",
                type: "multiple-choice",
                choices: [
                    { text: "1 - Estou treinado?", isCorrect: true },
                    { text: "Estou com fome?", isCorrect: false },
                    { text: "Posso terceirizar esta tarefa?", isCorrect: false },
                    { text: "A produ√ß√£o est√° alta?", isCorrect: false }
                ],
                successMessage: "Correto! O primeiro passo √© garantir que voc√™ est√° **treinado**. Voc√™ demonstrou Comportamento Seguro!",
                failMessage: "Incorreto. Voc√™ deve sempre se perguntar: **'Estou treinado?'** (Pergunta 1 do Intervalo de Seguran√ßa). Menos pontos de seguran√ßa."
            },
            // Fase 2: Preven√ß√£o de Cortes (EPI)
            {
                phase: 2,
                title: "Manuseio de Material Cortante",
                description: "Voc√™ precisa trabalhar com chapas met√°licas afiadas que exigem prote√ß√£o total das m√£os e antebra√ßos. Qual EPI voc√™ DEVE usar para esta tarefa?",
                correctEPI: "luva-anticorte", // Chave do EPI no invent√°rio
                hint: "Voc√™ precisa de resist√™ncia mec√¢nica para cortes.",
                successMessage: "Excelente! A **Luva Anticorte** √© crucial para evitar les√µes graves. Avance para a pr√≥xima miss√£o.",
                failMessage: "Incorreto. Usar uma luva comum ou de l√°tex √© um **Risco Grave** de acidente. Reveja as regras de seguran√ßa."
            },
            // Fase 3: Prote√ß√£o Qu√≠mica (EPI)
            {
                phase: 3,
                title: "Limpeza com Produto Agressivo",
                description: "Voc√™ precisa fazer a limpeza de um derramamento usando um solvente qu√≠mico que pode causar queimaduras na pele e respingar nos olhos. Quais EPIs s√£o necess√°rios para a prote√ß√£o ocular?",
                correctEPI: "oculos-ampla",
                hint: "Pense na veda√ß√£o completa dos olhos contra respingos.",
                successMessage: "Perfeito! O **√ìculos Ampla Vis√£o** √© essencial para proteger contra respingos qu√≠micos. Seguran√ßa garantida!",
                failMessage: "Voc√™ n√£o selecionou o √≥culos correto (ampla vis√£o) para prote√ß√£o contra respingos. Lembre-se: **Urgentemente, a seguran√ßa em primeiro lugar!**"
            },
            // Fase 4: LOTO (Regras/Processo)
            {
                phase: 4,
                title: "Procedimento de Bloqueio (LOTO)",
                description: "Voc√™ √© o Executante e o L√≠der de Bloqueio j√° acionou e verificou as energias. De acordo com o 'CAMINHO SEGURO DO LOTO', qual √© o 3¬∫ passo do processo que deve ser realizado?",
                type: "multiple-choice",
                choices: [
                    { text: "L√≠der bloqueia o arm√°rio com cadeado azul.", isCorrect: false },
                    { text: "Bloqueia as Energias.", isCorrect: true },
                    { text: "Realiza o Teste Zero.", isCorrect: false },
                    { text: "L√≠der re√∫ne os executantes e autoriza o in√≠cio.", isCorrect: false }
                ],
                successMessage: "Correto! O 3¬∫ passo √© o **Bloqueio das Energias** pelo executante. LOTO √© obrigat√≥rio e salva vidas!",
                failMessage: "Incorreto. A ordem no LOTO √© cr√≠tica. O 3¬∫ passo √© **Bloqueia as Energias**. Revisite o cartaz LOTO."
            },
            // Fase 5: 4 Princ√≠pios de Seguran√ßa (Comportamento)
            {
                phase: 5,
                title: "Situa√ß√£o de Risco Imediato",
                description: "Seu colega est√° realizando uma tarefa sem o EPI correto, apressado para terminar a produ√ß√£o. De acordo com os '4 PRINC√çPIOS DE SEGURAN√áA', o que voc√™ deve fazer imediatamente?",
                type: "multiple-choice",
                choices: [
                    { text: "Ignorar, pois 'Urg√™ncias e produtividade n√£o justificam a√ß√µes inseguras'.", isCorrect: false },
                    { text: "Parar e corrigir, pois 'Comportamento seguro' exige perceber os riscos e preveni-los.", isCorrect: true },
                    { text: "Avisar o supervisor s√≥ no final do turno (Reportar todos os incidentes).", isCorrect: false },
                    { text: "Ajudar o colega, mas ignorar o EPI.", isCorrect: false }
                ],
                successMessage: "Gesto de l√≠der! Voc√™ aplicou o 'Comportamento Seguro' e a regra de que 'Urg√™ncias n√£o justificam...'! Excelente!",
                failMessage: "Incorreto. Voc√™ deve **intervir** (Perceber os riscos e preveni-los). Nunca coloque a produtividade acima da vida. Reveja os Princ√≠pios."
            },
            // Fase 6: üì¢ Qualidade - Reporte de Incidentes
            {
                phase: 6,
                title: "üö® Miss√£o de Qualidade: Reporte Imediato",
                description: "Voc√™ percebe um problema de qualidade que pode afetar o produto final. De acordo com os Princ√≠pios de Seguran√ßa e Qualidade, qual √© a a√ß√£o correta?",
                type: "multiple-choice",
                choices: [
                    { text: "Tentar corrigir o defeito secretamente para n√£o parar a linha.", isCorrect: false },
                    { text: "Continuar a produ√ß√£o e reportar no final do turno.", isCorrect: false },
                    { text: "Parar, Isolar (seguran√ßa/qualidade) e Reportar todos os incidentes (Near Miss, Incidente ou Acidente).", isCorrect: true },
                    { text: "Pedir para o colega resolver, pois n√£o √© sua fun√ß√£o direta.", isCorrect: false }
                ],
                successMessage: "Correto! A regra de ouro √©: **Parar, Isolar e Reportar todos os incidentes.** Isso garante a seguran√ßa e a qualidade do produto!",
                failMessage: "Incorreto. A falha em reportar imediatamente um incidente de qualidade ou seguran√ßa viola um dos 4 Princ√≠pios. Lembre-se de **Reportar todos os incidentes**."
            },
            // Fase 7: üìò Qualidade - Padr√£o de Trabalho
            {
                phase: 7,
                title: "Miss√£o Final: O Padr√£o Incorreto",
                description: "Voc√™ est√° seguindo um Procedimento Operacional Padr√£o (POP), mas percebe que o m√©todo descrito √© ineficiente ou at√© perigoso. O que fazer?",
                type: "multiple-choice",
                choices: [
                    { text: "Seguir o procedimento arriscado, pois '√â o que est√° escrito'.", isCorrect: false },
                    { text: "Criar seu pr√≥prio atalho, pois 'Urg√™ncias e produtividade' importam.", isCorrect: false },
                    { text: "Parar, n√£o realizar a tarefa e reportar a n√£o conformidade para revis√£o do POP (Melhoria Cont√≠nua).", isCorrect: true },
                    { text: "Apenas reclamar para o colega, mas seguir trabalhando.", isCorrect: false }
                ],
                successMessage: "Vit√≥ria! Seu **Comportamento de Qualidade** est√° em n√≠vel m√°ximo. Voc√™ garantiu que o trabalho seja feito com seguran√ßa e excel√™ncia, seguindo/melhorando o padr√£o!",
                failMessage: "Incorreto. Voc√™ deve **Parar e Reportar**. Nunca realize uma tarefa perigosa ou ineficiente. Se o padr√£o n√£o √© seguro, ele deve ser corrigido."
            }
        ];

        let currentPhase = 0;
        let score = 0;
        let currentPhaseData = null;

        const startButton = document.getElementById('start-button');
        const scenarioDisplay = document.getElementById('scenario-display');
        const scoreDisplay = document.getElementById('score-display');
        const levelDisplay = document.getElementById('level-display');
        const feedbackArea = document.getElementById('feedback-area');
        const epiItems = document.querySelectorAll('.epi-item');

        startButton.addEventListener('click', startGame);

        function startGame() {
            startButton.style.display = 'none';
            currentPhase = 1;
            score = 0;
            updateScore(0);
            loadPhase(currentPhase);
        }

        function loadPhase(phaseNum) {
            currentPhaseData = gameData.find(d => d.phase === phaseNum);

            if (!currentPhaseData) {
                // Fim do jogo
                scenarioDisplay.innerHTML = `
                    <h2>üèÜ Miss√£o de Seguran√ßa e Qualidade Conclu√≠da!</h2>
                    <p>Parab√©ns! Voc√™ completou a Jornada Segura com sucesso. Pontua√ß√£o final: **${score}**!</p>
                    <p>Voc√™ demonstrou grande **Comportamento Seguro** e aplicou corretamente o conhecimento sobre EPIs, LOTO e os Princ√≠pios de Seguran√ßa e Qualidade.</p>
                    <button onclick="window.location.reload()" id="start-button">Jogar Novamente</button>
                `;
                document.getElementById('inventory-items').style.display = 'none';
                return;
            }

            // Reset visual dos EPIs e listeners
            epiItems.forEach(item => {
                item.classList.remove('correct', 'incorrect');
                item.removeEventListener('click', handleEPISelection); // Remove todos os listeners
            });

            levelDisplay.textContent = `Fase ${currentPhaseData.phase}`;
            feedbackArea.innerHTML = '';
            
            // Renderiza o cen√°rio da fase (Multi-choice ou EPI)
            let scenarioHTML = `
                <h2>${currentPhaseData.title}</h2>
                <p>${currentPhaseData.description}</p>
            `;

            if (currentPhaseData.type === "multiple-choice") {
                // L√≥gica para M√∫ltipla Escolha
                scenarioHTML += '<div id="choices-container" style="margin-top: 20px;">';
                currentPhaseData.choices.forEach((choice, index) => {
                    scenarioHTML += `
                        <button class="choice-button" data-index="${index}">
                            ${choice.text}
                        </button>`;
                });
                scenarioHTML += '</div>';
                scenarioDisplay.innerHTML = scenarioHTML;
                
                // Adiciona listeners aos bot√µes de m√∫ltipla escolha
                document.querySelectorAll('.choice-button').forEach(button => {
                    button.addEventListener('click', handleMultipleChoice);
                });
                document.getElementById('inventory-items').style.display = 'none';

            } else {
                // L√≥gica para Sele√ß√£o de EPI (Padr√£o)
                scenarioHTML += `<p class="hint">Clique no EPI que voc√™ usaria.</p>`;
                scenarioDisplay.innerHTML = scenarioHTML;
                epiItems.forEach(item => item.addEventListener('click', handleEPISelection));
                document.getElementById('inventory-items').style.display = 'flex';
            }
        }

        // Fun√ß√£o de M√∫ltipla Escolha
        function handleMultipleChoice(event) {
            const selectedIndex = parseInt(event.target.getAttribute('data-index'));
            const isCorrect = currentPhaseData.choices[selectedIndex].isCorrect;
            
            // Desativa todos os bot√µes de escolha
            document.querySelectorAll('.choice-button').forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = 0.6;
                btn.removeEventListener('click', handleMultipleChoice);
            });

            if (isCorrect) {
                event.target.style.backgroundColor = '#4CAF50'; // Verde
                updateScore(score + 15);
                displayFeedback(true, currentPhaseData.successMessage);
            } else {
                event.target.style.backgroundColor = '#f44336'; // Vermelho
                
                // Marca a correta
                const correctButton = Array.from(document.querySelectorAll('.choice-button')).find(btn => 
                    currentPhaseData.choices[parseInt(btn.getAttribute('data-index'))].isCorrect
                );
                if (correctButton) correctButton.style.backgroundColor = '#4CAF50';

                updateScore(score - 10);
                displayFeedback(false, currentPhaseData.failMessage);
            }

            // Avan√ßa para a pr√≥xima fase ap√≥s o feedback
            setTimeout(() => {
                currentPhase++;
                loadPhase(currentPhase);
            }, 3500); // D√° um pouco mais de tempo para ler o feedback
        }

        // Fun√ß√£o de Sele√ß√£o de EPI
        function handleEPISelection(event) {
            const selectedEPI = event.target.getAttribute('data-epi-id');
            const isCorrect = Array.isArray(currentPhaseData.correctEPI) 
                ? currentPhaseData.correctEPI.includes(selectedEPI)
                : selectedEPI === currentPhaseData.correctEPI;

            // Desativa temporariamente a sele√ß√£o de EPIs
            epiItems.forEach(item => item.removeEventListener('click', handleEPISelection));

            if (isCorrect) {
                event.target.classList.add('correct');
                updateScore(score + 10);
                displayFeedback(true, currentPhaseData.successMessage);
            } else {
                event.target.classList.add('incorrect');
                
                // Marca a correta
                const correctEPIElement = document.querySelector(`[data-epi-id="${currentPhaseData.correctEPI}"]`);
                if (correctEPIElement) {
                    correctEPIElement.classList.add('correct');
                }

                updateScore(score - 5);
                displayFeedback(false, currentPhaseData.failMessage);
            }
            
            setTimeout(() => {
                currentPhase++;
                loadPhase(currentPhase);
            }, 3500); 
        }

        function displayFeedback(isCorrect, message) {
            feedbackArea.innerHTML = `<p class="${isCorrect ? 'correct-text' : 'incorrect-text'}">${message}</p>`;
        }

        function updateScore(newScore) {
            score = Math.max(0, newScore); // Garante que a pontua√ß√£o n√£o seja negativa
            scoreDisplay.textContent = `Pontua√ß√£o: ${score}`;
        }
    </script>
</body>
</html>