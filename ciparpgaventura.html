<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amcor SafeQuest: A Jornada Segura (10 Dias)</title>

    <style>
        /* * ----------------------------------------
         * 1. CSS (Layout Moderno e Arrojado) 
         * ----------------------------------------
         */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

        :root {
            --amcor-blue: #004d99;
            --amcor-red: #e5002b;
            --color-correct: #4CAF50;
            --color-incorrect: #f44336;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f0f0f0;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        #game-container {
            width: 90%;
            max-width: 1200px;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        #header-game {
            background-color: var(--amcor-blue);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
        }

        #header-game h1 {
            margin: 0;
            font-size: 1.8em;
        }

        #status-bar {
            display: flex;
            gap: 20px;
            font-weight: bold;
        }

        #game-area {
            display: flex;
            flex-direction: column; 
            padding: 30px;
            gap: 30px;
        }

        @media (min-width: 768px) {
            #game-area {
                flex-direction: row; 
            }
            #scenario-display {
                border-right: 1px solid #ccc;
                padding-right: 30px;
            }
        }
        
        #scenario-display {
            flex-grow: 1;
            text-align: left;
        }

        #scenario-display h2 {
            color: var(--amcor-red);
        }
        
        #inventory {
            width: 100%;
            max-width: 250px;
            text-align: center;
            margin: 0 auto;
        }

        #inventory-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .epi-item {
            width: 80px;
            height: 80px;
            object-fit: contain;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;
            border-radius: 10px;
            border: 3px solid transparent;
            padding: 5px;
            background-color: #fff;
        }

        .epi-item:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            opacity: 0.9;
        }

        /* Barra de Sa√∫de (HP) */
        #health-bar-container {
            width: 150px;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #666;
        }

        #health-bar {
            height: 100%;
            background-color: var(--color-correct);
            transition: width 0.5s ease-in-out, background-color 0.5s;
            text-align: center;
            color: white;
            line-height: 20px;
            font-size: 0.9em;
        }

        /* Bot√£o de Iniciar Estilizado */
        #start-button, #next-day-button {
            background-color: var(--amcor-red);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
            font-weight: bold;
        }

        #start-button:hover, #next-day-button:hover {
            background-color: #a0001e;
        }

        /* Estilos para feedback: Certo e Errado */
        .correct {
            border-color: var(--color-correct) !important;
            box-shadow: 0 0 10px var(--color-correct);
        }

        .incorrect {
            border-color: var(--color-incorrect) !important;
            box-shadow: 0 0 10px var(--color-incorrect);
            animation: shake 0.5s;
        }
        
        #feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
        }

        .correct-text {
            background-color: #e8f5e9; 
            color: #2e7d32; 
            padding: 10px;
            border-radius: 5px;
        }

        .incorrect-text {
            background-color: #ffebee; 
            color: #c62828; 
            padding: 10px;
            border-radius: 5px;
        }
        
        .hint {
            font-style: italic;
            color: #666;
            margin-top: 15px;
        }

        /* Estilo para Bot√µes de M√∫ltipla Escolha */
        .choice-button {
            background-color: var(--amcor-blue); 
            color: white; 
            padding: 10px; 
            margin: 5px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            transition: background-color 0.3s;
            display: block; 
            width: 100%;
            text-align: left;
        }
        .choice-button:hover {
            background-color:var(--amcor-red) !important;
        }
        .choice-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

    </style>
</head>
<body>
    <div id="game-container">
        <header id="header-game">
            <h1>üõ°Ô∏è Amcor SafeQuest</h1>
            <div id="status-bar">
                <span id="day-display">Dia 0</span>
                <span id="score-display">Pontua√ß√£o: 0</span>
                <div id="health-bar-container">
                    <div id="health-bar" style="width: 100%;">100%</div>
                </div>
            </div>
        </header>

        <main id="game-area">
            <div id="scenario-display">
                <h2>Bem-vindo(a) √† Jornada Segura (10 Dias)!</h2>
                <p>Seu objetivo √© passar 10 dias de trabalho com uma **Sa√∫de (HP) superior a 90%**.</p>
                <p>Voc√™ tem 100% de HP. Cada erro de seguran√ßa ou qualidade reduz sua sa√∫de.</p>
                <p>Prepare-se para garantir um **Comportamento Seguro** e de **Qualidade**!</p>
                <button id="start-button">Iniciar 1¬∫ Dia</button>
                <div id="feedback-area"></div>
            </div>
            
            <div id="inventory">
                <h3>Invent√°rio de EPIs</h3>
                <div id="inventory-items">
                    <img src="luvaanticorte.png" alt="Luva Anticorte" class="epi-item" data-epi-id="luva-anticorte" title="Luva Anticorte">
                    <img src="luvalatex.jpg" alt="Luva de L√°tex Qu√≠mica" class="epi-item" data-epi-id="luva-latex" title="Luva de L√°tex Qu√≠mica">
                    <img src="oculosamplavisao.webp" alt="√ìculos Ampla Vis√£o" class="epi-item" data-epi-id="oculos-ampla" title="√ìculos Ampla Vis√£o (contra respingos)">
                    <img src="oculosdeseguranca.jpg" alt="√ìculos de Seguran√ßa" class="epi-item" data-epi-id="oculos-seguranca" title="√ìculos de Seguran√ßa (b√°sico)">
                    <img src="bonecasquete.webp" alt="Bon√© Casquete" class="epi-item" data-epi-id="bone-casquete" title="Bon√© Casquete (contra impactos leves)">
                    <img src="luvamangote.jpg" alt="Mangote de Prote√ß√£o" class="epi-item" data-epi-id="mangote" title="Mangote (Prote√ß√£o de Antebra√ßo)">
                </div>
            </div>
        </main>
    </div>

    <script>
        /* * ----------------------------------------
         * 2. JAVASCRIPT (L√≥gica do Jogo com 10 Dias, HP e Pontua√ß√£o) 
         * ----------------------------------------
         */
        
        // Dados do Jogo (Pool de Situa√ß√µes - Usaremos as 7 originais como um pool)
        const situationPool = [
            // Categoria: COMPORTAMENTO / REGRAS
            {
                id: 'S1', type: "multiple-choice", 
                title: "Situa√ß√£o: Produtividade vs. Seguran√ßa",
                description: "Seu supervisor pede para acelerar, mas isso o for√ßa a pular o Intervalo de Seguran√ßa. O que a regra diz?",
                choices: [
                    { text: "Acelerar, pois a produ√ß√£o √© urgente.", isCorrect: false, penaltyHP: 3, penaltyScore: 20 },
                    { text: "Parar o trabalho e realizar o Intervalo de Seguran√ßa antes de prosseguir.", isCorrect: true, rewardScore: 30 },
                ],
                successMessage: "Correto! **Urg√™ncias e produtividade n√£o justificam a√ß√µes inseguras.**",
                failMessage: "Erro! Voc√™ deve **Parar e Corrigir** antes de prosseguir. HP -3."
            },
            {
                id: 'S2', type: "multiple-choice", 
                title: "Situa√ß√£o: Interven√ß√£o",
                description: "Voc√™ v√™ um colega usando o EPI errado. O que voc√™ faz, seguindo o Comportamento Seguro?",
                choices: [
                    { text: "Avisar o supervisor por r√°dio para que ele resolva.", isCorrect: false, penaltyHP: 2, penaltyScore: 10 },
                    { text: "Intervir imediatamente, corrigindo a a√ß√£o insegura.", isCorrect: true, rewardScore: 25 },
                ],
                successMessage: "Correto! **Comportamento seguro** exige perceber e prevenir riscos. Voc√™ interviu!",
                failMessage: "Erro! Deixar o risco acontecer √© falhar na interven√ß√£o. HP -2."
            },
            // Categoria: EPI
            {
                id: 'S3', type: "epi", 
                title: "Situa√ß√£o: Manuten√ß√£o com Fiapos",
                description: "Voc√™ precisa inspecionar e limpar uma m√°quina que produz pequenos fiapos, mas sem produtos qu√≠micos. Qual √© a prote√ß√£o ocular M√çNIMA e ADEQUADA?",
                correctEPI: "oculos-seguranca",
                hint: "Prote√ß√£o b√°sica contra part√≠culas.",
                successMessage: "Correto! O √ìculos de Seguran√ßa b√°sico √© suficiente para part√≠culas. Pontos +15.",
                failMessage: "Erro! Voc√™ negligenciou a prote√ß√£o ocular. HP -2."
            },
            {
                id: 'S4', type: "epi", 
                title: "Situa√ß√£o: Movimenta√ß√£o de Caixas",
                description: "Voc√™ est√° ajudando a organizar o estoque, movimentando caixas leves. Qual EPI protege sua cabe√ßa contra esbarr√µes em prateleiras?",
                correctEPI: "bone-casquete",
                hint: "Prote√ß√£o contra impactos leves, n√£o contra quedas de objetos pesados.",
                successMessage: "Correto! O Bon√© Casquete √© ideal para prote√ß√£o contra impactos leves em √°reas baixas. Pontos +15.",
                failMessage: "Erro! Sem prote√ß√£o de cabe√ßa (casquete ou capacete), voc√™ corre o risco de les√µes por impacto leve. HP -1."
            },
            // Categoria: LOTO / PROCEDIMENTO
            {
                id: 'S5', type: "multiple-choice", 
                title: "Situa√ß√£o: LOTO",
                description: "O L√≠der de Bloqueio est√° prestes a fazer o Teste Zero. Qual √© o passo anterior, segundo o Caminho Seguro do LOTO?",
                choices: [
                    { text: "Bloquear as energias.", isCorrect: true, rewardScore: 30 },
                    { text: "Remover os dispositivos de bloqueio (errado).", isCorrect: false, penaltyHP: 5, penaltyScore: 30 },
                ],
                successMessage: "Correto! O Bloqueio das Energias (Passo 3) √© essencial antes do Teste Zero (Passo 4).",
                failMessage: "Erro Grave! Errar a sequ√™ncia LOTO pode causar um acidente. HP -5."
            },
            {
                id: 'S6', type: "multiple-choice", 
                title: "Situa√ß√£o: Qualidade e Padr√£o",
                description: "O PNC de um produto est√° desatualizado. Voc√™ deve segui-lo ou reportar?",
                choices: [
                    { text: "Seguir o PNC, mesmo que esteja errado.", isCorrect: false, penaltyHP: 2, penaltyScore: 10 },
                    { text: "Parar, n√£o realizar a tarefa e reportar a n√£o conformidade para revis√£o (Melhoria Cont√≠nua).", isCorrect: true, rewardScore: 25 },
                ],
                successMessage: "Correto! Parar e reportar garante a Qualidade e a Seguran√ßa do processo.",
                failMessage: "Erro! Seguir um padr√£o incorreto leva a problemas de qualidade e seguran√ßa. HP -2."
            },
            {
                id: 'S7', type: "epi", 
                title: "Situa√ß√£o: Prote√ß√£o Qu√≠mica M√£o",
                description: "Voc√™ est√° manuseando um agente de limpeza l√≠quido com alto pH. Qual a prote√ß√£o para as m√£os?",
                correctEPI: "luva-latex",
                hint: "Prote√ß√£o contra produtos qu√≠micos e l√≠quidos.",
                successMessage: "Correto! A Luva de L√°tex (ou nitr√≠lica/PVC) √© ideal para agentes qu√≠micos. Pontos +15.",
                failMessage: "Erro! Agentes qu√≠micos causam irrita√ß√£o e queimaduras sem a luva qu√≠mica correta. HP -3."
            },
        ];

        // Vari√°veis do Jogo
        const totalDays = 10;
        const situationsPerDay = 5;

        let currentDay = 0;
        let situationCount = 0;
        let playerHP = 100;
        let score = 0;
        let dailySituations = [];
        let currentSituationData = null;

        // Elementos DOM
        const startButton = document.getElementById('start-button');
        const scenarioDisplay = document.getElementById('scenario-display');
        const scoreDisplay = document.getElementById('score-display');
        const dayDisplay = document.getElementById('day-display');
        const healthBar = document.getElementById('health-bar');
        const feedbackArea = document.getElementById('feedback-area');
        const epiItems = document.querySelectorAll('.epi-item');
        const inventoryItemsDiv = document.getElementById('inventory-items');

        startButton.addEventListener('click', startGame);

        // --- Fun√ß√µes de Controle do Jogo ---

        function startGame() {
            startButton.style.display = 'none';
            currentDay = 1;
            playerHP = 100;
            score = 0;
            updateHP(0);
            updateScore(0);
            startDay();
        }

        function startDay() {
            situationCount = 0;
            dayDisplay.textContent = `Dia ${currentDay}/${totalDays}`;
            
            // Seleciona 5 situa√ß√µes aleat√≥rias para o dia
            dailySituations = selectRandomSituations(situationPool, situationsPerDay);
            loadNextSituation();
        }

        function loadNextSituation() {
            if (situationCount >= situationsPerDay) {
                endDay();
                return;
            }

            currentSituationData = dailySituations[situationCount];
            situationCount++;

            // Reset visual dos EPIs e listeners
            epiItems.forEach(item => {
                item.classList.remove('correct', 'incorrect');
                item.removeEventListener('click', handleEPISelection);
            });
            
            feedbackArea.innerHTML = '';

            let scenarioHTML = `
                <h2>Dia ${currentDay}, Situa√ß√£o ${situationCount}/${situationsPerDay}</h2>
                <p><strong>${currentSituationData.title}</strong></p>
                <p>${currentSituationData.description}</p>
            `;

            if (currentSituationData.type === "multiple-choice") {
                scenarioHTML += '<div id="choices-container" style="margin-top: 20px;">';
                currentSituationData.choices.forEach((choice, index) => {
                    scenarioHTML += `<button class="choice-button" data-index="${index}">${choice.text}</button>`;
                });
                scenarioHTML += '</div>';
                scenarioDisplay.innerHTML = scenarioHTML;
                
                document.querySelectorAll('.choice-button').forEach(button => {
                    button.addEventListener('click', handleMultipleChoice);
                });
                inventoryItemsDiv.style.display = 'none';
                document.getElementById('inventory').style.display = 'none';

            } else { // Type: epi
                scenarioHTML += `<p class="hint">Clique no EPI que voc√™ usaria.</p>`;
                scenarioDisplay.innerHTML = scenarioHTML;
                epiItems.forEach(item => item.addEventListener('click', handleEPISelection));
                inventoryItemsDiv.style.display = 'flex';
                document.getElementById('inventory').style.display = 'block';
            }
        }

        function endDay() {
            if (currentDay >= totalDays) {
                endGame();
                return;
            }

            scenarioDisplay.innerHTML = `
                <h2>Fim do Dia ${currentDay}!</h2>
                <p>HP atual: <strong>${playerHP}%</strong> | Pontua√ß√£o: **${score}**</p>
                <p>Voc√™ resolveu ${situationsPerDay} situa√ß√µes. Prepare-se para o pr√≥ximo turno!</p>
                <button id="next-day-button">Iniciar Dia ${currentDay + 1}</button>
            `;
            document.getElementById('inventory').style.display = 'none';
            document.getElementById('next-day-button').addEventListener('click', () => {
                currentDay++;
                startDay();
            });
        }

        function endGame() {
            let finalMessage = '';
            let finalTitle = '';

            if (playerHP >= 90) {
                finalTitle = "üèÜ VIT√ìRIA! JORNADA SEGURA CONCLU√çDA!";
                finalMessage = `Parab√©ns, L√≠der de Seguran√ßa! Voc√™ completou 10 dias de trabalho com uma Sa√∫de (HP) de **${playerHP}%** e Pontua√ß√£o de **${score}**. Seu compromisso com a seguran√ßa e qualidade √© um exemplo!`;
            } else {
                finalTitle = "‚ùå FALHA NA MISS√ÉO: HP ABAIXO DE 90%";
                finalMessage = `Voc√™ concluiu os 10 dias, mas sua Sa√∫de (HP) final foi de **${playerHP}%**. O objetivo de 90% n√£o foi atingido devido a erros cr√≠ticos. Revise suas escolhas de seguran√ßa.`;
            }

            scenarioDisplay.innerHTML = `
                <h2>${finalTitle}</h2>
                <p>${finalMessage}</p>
                <button onclick="window.location.reload()" id="start-button">Jogar Novamente</button>
            `;
            document.getElementById('inventory').style.display = 'none';
        }


        // --- Fun√ß√µes de Resposta ---

        function handleMultipleChoice(event) {
            const selectedIndex = parseInt(event.target.getAttribute('data-index'));
            const choice = currentSituationData.choices[selectedIndex];
            
            // Desativa todos os bot√µes de escolha
            document.querySelectorAll('.choice-button').forEach(btn => {
                btn.disabled = true;
                btn.removeEventListener('click', handleMultipleChoice);
            });

            if (choice.isCorrect) {
                event.target.style.backgroundColor = varColor('correct');
                updateScore(score + (choice.rewardScore || 15));
                displayFeedback(true, currentSituationData.successMessage);
            } else {
                event.target.style.backgroundColor = varColor('incorrect');
                
                // Marca a correta
                const correctButton = Array.from(document.querySelectorAll('.choice-button')).find(btn => 
                    currentSituationData.choices[parseInt(btn.getAttribute('data-index'))].isCorrect
                );
                if (correctButton) correctButton.style.backgroundColor = varColor('correct');

                updateHP(playerHP - (choice.penaltyHP || 2)); // Puni√ß√£o de HP
                updateScore(score - (choice.penaltyScore || 10)); // Puni√ß√£o de Pontos
                displayFeedback(false, currentSituationData.failMessage);
            }

            setTimeout(loadNextSituation, 3000); 
        }

        function handleEPISelection(event) {
            const selectedEPI = event.target.getAttribute('data-epi-id');
            const isCorrect = Array.isArray(currentSituationData.correctEPI) 
                ? currentSituationData.correctEPI.includes(selectedEPI)
                : selectedEPI === currentSituationData.correctEPI;

            // Desativa temporariamente a sele√ß√£o de EPIs
            epiItems.forEach(item => item.removeEventListener('click', handleEPISelection));

            if (isCorrect) {
                event.target.classList.add('correct');
                updateScore(score + 15);
                displayFeedback(true, currentSituationData.successMessage);
            } else {
                event.target.classList.add('incorrect');
                
                // Marca a correta
                const correctEPIElement = document.querySelector(`[data-epi-id="${currentSituationData.correctEPI}"]`);
                if (correctEPIElement) {
                    correctEPIElement.classList.add('correct');
                }

                updateHP(playerHP - 3); // Puni√ß√£o padr√£o de EPI
                updateScore(score - 10);
                displayFeedback(false, currentSituationData.failMessage);
            }
            
            setTimeout(loadNextSituation, 3000); 
        }

        // --- Fun√ß√µes de Utilit√°rio e Display ---

        function updateHP(newHP) {
            playerHP = Math.max(0, Math.min(100, newHP));
            healthBar.style.width = `${playerHP}%`;
            healthBar.textContent = `${playerHP}%`;
            
            if (playerHP < 20) {
                healthBar.style.backgroundColor = varColor('incorrect');
            } else if (playerHP < 50) {
                healthBar.style.backgroundColor = '#FFC107'; // Amarelo
            } else {
                healthBar.style.backgroundColor = varColor('correct');
            }
        }

        function updateScore(newScore) {
            score = Math.max(0, newScore);
            scoreDisplay.textContent = `Pontua√ß√£o: ${score}`;
        }

        function displayFeedback(isCorrect, message) {
            feedbackArea.innerHTML = `<p class="${isCorrect ? 'correct-text' : 'incorrect-text'}">${message}</p>`;
        }
        
        function varColor(type) {
             return type === 'correct' ? '#4CAF50' : '#f44336';
        }

        function selectRandomSituations(pool, count) {
            // Fun√ß√£o para selecionar N situa√ß√µes aleat√≥rias do pool
            const shuffled = [...pool].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }
    </script>
</body>
</html>